(function(){function j(a,b){var c=this.a=new g;this.e=a;this.options=w(b,x);this.f=new p.InfoWindow;this.build();c.setCenterPoint(a);this.options.resultSetSize&&c.setResultSetSize(this.options.resultSetSize);c.setSearchCompleteCallback(this,j.prototype.searchCompleteCallback);typeof this.options.buildCompleteCallback=="function"&&this.options.buildCompleteCallback.apply(this,[])}function g(){this.options={v:"1.0",callback:"window.jeremy.gLocalSearch.callback",context:g.searchers.length};g.searchers.push(this)}
function l(a,b,c){c=this.options=w(c,{buttonText:"Search",hintString:"Search the map!"});var d=this;a=d.form=e("form","gsc-search-box",[e("table","gsc-search-box",[e("tbody",null,[e("tr",null,[e("td","gsc-input",[d.input=e("input","gsc-input",null,{type:"text",autocomplete:"off",size:10,name:"search",title:"search",value:c.hintString,onfocus:q(d,l.prototype.i),onblur:q(d,l.prototype.i)})]),e("td","gsc-search-button",[d.button=e("input","gsc-search-button",null,{type:"submit",value:c.buttonText,title:"search"})]),
d.k=a?e("td","gsc-clear-button",[e("div","gsc-clear-button",[" "],{title:"clear results",onclick:function(){d.form.clearResults()}})]):null])])],{cellspacing:0,cellpadding:0}),e("table","gsc-branding",[e("tbody",null,[e("tr",null,[e("td","gsc-branding-user-defined"),e("td","gsc-branding-text",[e("div","gsc-branding-text",["powered by"])]),e("gsc-branding-img-noclear",[e("img","gsc-branding-img-noclear",null,{src:"http://www.google.com/uds/css/small-logo.png"})])])])])],{"accept-charset":"utf-8"});
b&&b.appendChild(a)}function e(a,b,c,d,h){a=document.createElement(a||"div");if(b)a.className=b;if(c)for(var i=0;i<c.length;i++){b=c[i];if(typeof b=="string"||typeof b=="number")a.innerHTML+=b;else try{a.appendChild(c[i])}catch(r){}}if(d)for(i in d)if(i.match(/^on/)&&m(d[i],"function"))a[i]=d[i];else a.setAttribute(i,d[i]);if(h)for(i in h)a.style[i]=h[i];return a}function f(a,b,c,d){return e("div",a,b,c,d)}function q(a,b,c){return function(){return b.apply(a,c?c:arguments)}}function w(){for(var a=
{},b=arguments||[],c=0;c<b.length;c++){var d=b[c];for(var h in d)if(typeof a[h]=="undefined")a[h]=d[h]}return a}function m(a,b){return typeof a==b}for(var p=google.maps,x={resultSetSize:8,clearResultsString:"X",minimizeResultsString:"_",maximizeResultsString:"^",icons:[],shadow:new p.MarkerImage("http://www.google.com/mapfiles/gadget/shadow50Small80.png",null,null,new p.Point(8,28)),showResultsList:true,showResultsMarkers:true,searchFormOptions:{}},t=0;t<8;t++)x.icons.push(google.loader.ServiceBase+
"/solutions/localsearch/img/pin_metalred_"+String.fromCharCode(65+t)+".png");if(!window.noGBarCSS){t=e("link",null,null,{href:"http://www.google.com/uds/solutions/localsearch/gmlocalsearch.css",rel:"stylesheet",type:"text/css"});var z=e("link",null,null,{href:"default.css",rel:"stylesheet",type:"text/css"}),y=document.getElementsByTagName("head")[0];y.appendChild(t);y.appendChild(z)}j.prototype.build=function(){var a=this,b=a.options;a.container=f("gmls",[a.innerContainer=f("gmls-app gmls-idle gmls-app-full-mode gmls-std-mode",
[a.resultsDiv=f("gmls-results-popup gmls-results-popup-maximized",[f("gmls-results-list",[f("gmls-results-table",[a.resultsTable=e("table","gmls-results-table")]),f("gmls-results-controls",[e("table","gmls-results-controls",[e("tr",null,[e("td","gmls-more-results gsc-results",[f("gsc-cursor-box",[a.pageDiv=f("gsc-cursor")])]),e("td","gmls-prev-next"),e("td","gmls-clear-results",[f("gmls-minimize-results gmls-control-button",[a.options.minimizeResultsString],{onclick:function(){a.minimizeResults()}}),
f("gmls-maximize-results gmls-control-button",[a.options.maximizeResultsString],{onclick:function(){a.maximizeResults()}}),f("gmls-clear-results gmls-control-button",[a.options.clearResultsString],{onclick:function(){a.form.clearResults()}})])])])]),a.attributionDiv=f("gmls-attribution")])]),a.c=f("gmls-search-form gmls-search-form-idle")])]);b=a.form=new l(0,a.c,b.n);a.input=b.input;function c(){a.c.className=a.c.className.replace(/\bgmls-search-form-idle\b/,"gmls-search-form-active")}b.setOnFocusListener(a,
c);b.setOnBlurListener(a,c);b.setOnSubmitCallback(a,j.prototype.execute);b.setOnClearCallback(a,j.prototype.clearResults)};j.prototype.execute=function(a){var b=this.a,c=this.input;this.clearResults();if(typeof a=="string")c.value=a;b.execute(c.value);return false};j.prototype.clearResults=function(){var a=this.resultsTable,b=this.innerContainer,c=this.a.results,d=this.pageDiv;this.f.close();b.className=b.className.replace(/\bgmls-active\b/,"gmls-idle");if(c){for(;a.firstChild;)a.removeChild(a.firstChild);
for(;d.firstChild;)d.removeChild(d.firstChild);for(a=0;a<c.length;a++)c[a].marker.setMap(null)}};j.prototype.minimizeResults=function(){var a=this.resultsDiv;a.className=a.className.replace(/\b(gmls-results-popup-)maximized\b/g,"$1minimized")};j.prototype.maximizeResults=function(){var a=this.resultsDiv;a.className=a.className.replace(/\b(gmls-results-popup-)minimized\b/g,"$1maximized")};j.prototype.searchCompleteCallback=function(){var a=this,b=a.a,c=b.results,d=b.cursor,h=a.pageDiv,i=a.resultsTable;
b.getAttribution();var r=a.e,n=a.options,s=["A","B","C","D","E","F","G","H"];b=b.resultViewport;var k=new p.LatLngBounds(new p.LatLng(parseFloat(b.sw.lat),parseFloat(b.sw.lng)),new p.LatLng(parseFloat(b.ne.lat),parseFloat(b.ne.lng)));b=a.innerContainer;function A(v){return function(){j.prototype.selectResult.apply(a,[v])}}function B(v){return function(){a.gotoPage(v)}}n.suppressCenterAndZoom||r.fitBounds(k);for(k=0;k<c.length;k++){var o=c[k],u=s[k];u=o.listHtml=e("tr",null,[e("td",null,[f("gmls-result-list-item",
[f("gmls-result-list-item-key gmls-result-list-item-key-"+u+" gmls-result-list-item-key-local-"+u+" gmls-result-list-item-key-keymode",["&nbsp;"]),f("gs-title",[o.title]),f("gs-street",["&nbsp;-&nbsp;"+o.streetAddress])])])]);var C=o.marker=new p.Marker({map:n.showResultsMarkers?r:null,position:new p.LatLng(parseFloat(o.lat),parseFloat(o.lng)),title:o.title,icon:typeof n.icons=="string"?n.icons:n.icons[k],shadow:n.shadow,shape:n.markerShape});o=A(o);p.event.addDomListener(u,"click",o);p.event.addListener(C,
"click",o);n.showResultsList&&i.appendChild(u)}b.className=b.className.replace(/\bgmls-idle\b/,"gmls-active");for(k=0;d.pages&&k<d.pages.length;k++)h.appendChild(f("gsc-cursor-page"+(k==d.currentPageIndex?" gsc-cursor-current-page":""),[d.pages[k].label],{onclick:B(k)}))};j.prototype.setResultSetSize=function(a){this.a.setResultSetSize(a)};j.prototype.selectResult=function(a){for(var b=this.a,c=b.results,d=this.e,h=this.f,i=a.marker,r=0;r<b.results.length;r++){var n=c[r],s=n.listHtml.firstChild.firstChild;
if(n===a){if(!s.className.match(/\bgmls-selected\b/))s.className=s.className+=" gmls-selected"}else s.className=s.className.replace(/ gmls-selected/g,"")}h.close();h.setContent(a.html);h.open(d,i)};j.prototype.gotoPage=function(a){var b=this.a;this.clearResults();b.gotoPage(a)};g.prototype.setCenterPoint=function(a){var b=this.options;if(m(a.lat,"function")&&m(a.lng,"function")&&m(a.toUrlValue,"function"))b.sll=a.toUrlValue(6);else if(m(a.getCenter,"function")&&m(a.getBounds,"function")){b.sll=function(){return a.getCenter().toUrlValue(6)};
b.gll=function(){return a.getBounds().toUrlValue(7).replace(/\./g,"")};b.sspn=function(){return a.getBounds().toSpan().toUrlValue(6)}}else if(m(a,"string"))b.sll=a};g.prototype.setResultSetSize=function(a){this.options.rsz=a};g.prototype.execute=function(a,b){var c=this.options,d=[];for(var h in c)d.push([h,encodeURIComponent(m(c[h],"function")?c[h]():c[h])].join("="));b&&d.push(["start",encodeURIComponent(b)].join("="));d.push(["q",encodeURIComponent(a?a:this.b)].join("="));if(a||b&&this.b){this.b=
a||this.b;c=e("script",null,null,{type:"text/javascript",src:g.j+d.join("&")});document.getElementsByTagName("head")[0].appendChild(c)}};g.prototype.setSearchCompleteCallback=function(a,b,c){this.h=q(a,b,c)};g.prototype.gotoPage=function(a){var b=this.options.rsz;m(b,"number")||(b=m(b,"string")&&b.match(/^large$/)?8:4);this.execute(this.b,b*a)};g.prototype.RAWcallback=function(a){var b=this.results=a.results;this.cursor=a.cursor;this.resultViewport=a.viewport;this.d=a.attribution;for(a=0;a<b.length;a++)this.createResultHtml(b[a]);
m(this.h,"function")&&this.h()};g.prototype.getAttribution=function(){if(!this.d)return false;return f("gs-results-attribution",[this.d])};g.prototype.createResultHtml=function(a){a.html=f("gs-result gs-localResult",[f("gs-title",[e("a","gs-title",[a.title],{href:a.url})]),f("gs-snippet",[a.snippet]),f("gs-address",[f("gs-street gs-addressLine",[a.streetAddress]),f("gs-city gs-addressLine",[a.city+", "+a.region]),f("gs-country",[a.country])]),f("gs-phone",[a.phoneNumbers&&a.phoneNumbers[0]?a.phoneNumbers[0].number:
null]),f("gs-directions")])};g.searchers=[];g.callback=function(a,b){g.searchers[a].RAWcallback(b)};g.j="http://ajax.googleapis.com/ajax/services/search/local?";l.prototype.setOnSubmitCallback=function(a,b,c){var d=this.form;c||(c=[]);c.splice(0,0,this);d.onsubmit=q(a,b,c)};l.prototype.setOnClearCallback=function(a,b,c){c||(c=[]);c.splice(0,0,this);this.g=q(a,b,c)};l.prototype.execute=function(a){var b=this.form;this.input.value=a;b.submit()};l.prototype.setOnFocusListener=function(a,b,c){this.m=
q(a,b,c)};l.prototype.setOnBlurListener=function(a,b,c){this.l=q(a,b,c)};l.prototype.i=function(a){var b=this.input,c=this.options.hintString;if(!a)a=window.event;if(a.type=="focus"){if(b.value==c)b.value="";if(this.onfocuslistener)return this.onfocuslistener()}else if(a.type=="blur"){if(b.value=="")b.value=c;if(this.onblurlistener)return this.onblurlistener()}};l.prototype.clearResults=function(){this.form.reset();if(this.g)return this.g()};window.jeremy||(window.jeremy={});window.jeremy.jGoogleBar=
j;window.jeremy.jGoogleBar.prototype=j.prototype;window.jeremy.gLocalSearch=g;window.jeremy.gLocalSearch.prototype=g.prototype;window.jeremy.SearchForm=l;window.jeremy.SearchForm.prototype=l.prototype})();
