(function(){function i(a,b){var c=this.a=new f;this.e=a;this.options=v(b,u);this.i=new o.InfoWindow;this.build();c.setCenterPoint(a);this.options.resultSetSize&&c.setResultSetSize(this.options.resultSetSize);c.setSearchCompleteCallback(this,i.prototype.searchCompleteCallback);typeof this.options.buildCompleteCallback=="function"&&this.options.buildCompleteCallback.apply(this,[])}function f(){this.options={v:"1.0",callback:"window.jeremy.gLocalSearch.callback",context:f.searchers.length};f.searchers.push(this)}
function k(a,b,c,e,g){a=document.createElement(a||"div");if(b)a.className=b;if(c)for(var h=0;h<c.length;h++){b=c[h];if(typeof b=="string"||typeof b=="number")a.innerHTML+=b;else try{a.appendChild(c[h])}catch(p){}}if(e)for(h in e)if(h.match(/^on/)&&l(e[h],"function"))a[h]=e[h];else a.setAttribute(h,e[h]);if(g)for(h in g)a.style[h]=g[h];return a}function d(a,b,c,e){return k("div",a,b,c,e)}function w(a,b,c){return function(){b.apply(a,c?c:[])}}function v(){for(var a={},b=arguments,c=0;c<b.length;c++){var e=
b[c];for(var g in e)if(typeof a[g]=="undefined")a[g]=e[g]}return a}function l(a,b){return typeof a==b}for(var o=google.maps,x=google.search,u={resultSetSize:8,clearResultsString:"Clear results",icons:[],shadow:new o.MarkerImage("http://www.google.com/mapfiles/gadget/shadow50Small80.png",null,null,new o.Point(8,28)),showResultsList:true,showResultsMarkers:true},r=0;r<8;r++)u.icons.push(google.loader.ServiceBase+"/solutions/localsearch/img/pin_metalred_"+String.fromCharCode(65+r)+".png");if(!window.noGBarCSS){r=
k("link",null,null,{href:"http://www.google.com/uds/solutions/localsearch/gmlocalsearch.css",rel:"stylesheet",type:"text/css"});document.getElementsByTagName("head")[0].appendChild(r)}i.prototype.build=function(){var a=this;a.container=d("gmls",[a.innerContainer=d("gmls-app gmls-idle gmls-app-full-mode gmls-std-mode",[a.resultsDiv=d("gmls-results-popup",[d("gmls-results-list",[d("gmls-results-table",[a.resultsTable=k("table","gmls-results-table")]),d("gmls-results-controls",[k("table","gmls-results-controls",
[k("tr",null,[k("td","gmls-more-results gsc-results",[d("gsc-cursor-box",[a.pageDiv=d("gsc-cursor")])]),k("td","gmls-prev-next"),k("td","gmls-clear-results",[d("gmls-clear-results",[a.options.clearResultsString],{onclick:function(){i.prototype.clearResults.apply(a,[])}})])])])]),a.attributionDiv=d("gmls-attribution")])]),a.c=d("gmls-search-form gmls-search-form-idle")])]);var b=a.form=new x.SearchForm(0,a.c);(a.input=b.input).onfocus=function(){a.c.className=a.c.className.replace(/\bgmls-search-form-idle\b/,
"gmls-search-form-active")};b.setOnSubmitCallback(a,i.prototype.execute)};i.prototype.execute=function(a){var b=this.a,c=this.input;this.clearResults();if(typeof a=="string")c.value=a;b.execute(c.value);return false};i.prototype.clearResults=function(){var a=this.resultsTable,b=this.innerContainer,c=this.a.results,e=this.pageDiv;this.i.close();b.className=b.className.replace(/\bgmls-active\b/,"gmls-idle");if(c){for(;a.firstChild;)a.removeChild(a.firstChild);for(;e.firstChild;)e.removeChild(e.firstChild);
for(a=0;a<c.length;a++)c[a].marker.setMap(null)}};i.prototype.searchCompleteCallback=function(){var a=this,b=a.a,c=b.results,e=b.cursor,g=a.pageDiv,h=a.resultsTable;b.getAttribution();var p=a.e,m=a.options,q=["A","B","C","D","E","F","G","H"];b=b.resultViewport;var j=new o.LatLngBounds(new o.LatLng(parseFloat(b.sw.lat),parseFloat(b.sw.lng)),new o.LatLng(parseFloat(b.ne.lat),parseFloat(b.ne.lng)));b=a.innerContainer;function y(t){return function(){i.prototype.selectResult.apply(a,[t])}}function z(t){return function(){a.gotoPage(t)}}
m.suppressCenterAndZoom||p.fitBounds(j);for(j=0;j<c.length;j++){var n=c[j],s=q[j];s=n.listHtml=k("tr",null,[k("td",null,[d("gmls-result-list-item",[d("gmls-result-list-item-key gmls-result-list-item-key-"+s+" gmls-result-list-item-key-local-"+s+" gmls-result-list-item-key-keymode",["&nbsp;"]),d("gs-title",[n.title]),d("gs-street",["&nbsp;-&nbsp;"+n.streetAddress])])])]);var A=n.marker=new o.Marker({map:m.showResultsMarkers?p:null,position:new o.LatLng(parseFloat(n.lat),parseFloat(n.lng)),title:n.title,
icon:typeof m.icons=="string"?m.icons:m.icons[j],shadow:m.shadow,shape:m.markerShape});n=y(n);o.event.addDomListener(s,"click",n);o.event.addListener(A,"click",n);m.showResultsList&&h.appendChild(s)}b.className=b.className.replace(/\bgmls-idle\b/,"gmls-active");for(j=0;j<e.pages.length;j++)g.appendChild(d("gsc-cursor-page"+(j==e.currentPageIndex?" gsc-cursor-current-page":""),[e.pages[j].label],{onclick:z(j)}))};i.prototype.setResultSetSize=function(a){this.a.setResultSetSize(a)};i.prototype.selectResult=
function(a){for(var b=this.a,c=b.results,e=this.e,g=this.infowindow,h=a.marker,p=0;p<b.results.length;p++){var m=c[p],q=m.listHtml.firstChild.firstChild;if(m===a){if(!q.className.match(/\bgmls-selected\b/))q.className=q.className+=" gmls-selected"}else q.className=q.className.replace(/ gmls-selected/g,"")}g.close();g.setContent(a.j);g.open(e,h)};i.prototype.gotoPage=function(a){var b=this.a;this.clearResults();b.gotoPage(a)};f.prototype.setCenterPoint=function(a){var b=this.options;if(l(a.lat,"function")&&
l(a.lng,"function")&&l(a.toUrlValue,"function"))b.sll=a.toUrlValue(6);else if(l(a.getCenter,"function")&&l(a.getBounds,"function")){b.sll=function(){return a.getCenter().toUrlValue(6)};b.gll=function(){return a.getBounds().toUrlValue(7).replace(/\./g,"")};b.m=function(){return a.getBounds().toSpan().toUrlValue(6)}}else if(l(a,"string"))b.sll=a};f.prototype.setResultSetSize=function(a){this.options.rsz=a};f.prototype.execute=function(a,b){var c=this.options,e=[];for(var g in c)e.push([g,encodeURIComponent(l(c[g],
"function")?c[g]():c[g])].join("="));b&&e.push(["start",encodeURIComponent(b)].join("="));e.push(["q",encodeURIComponent(a?a:this.b)].join("="));if(a||b&&this.b){this.b=a||this.b;c=k("script",null,null,{type:"text/javascript",src:f.h+e.join("&")});document.getElementsByTagName("head")[0].appendChild(c)}};f.prototype.setSearchCompleteCallback=function(a,b,c){this.g=w(a,b,c)};f.prototype.gotoPage=function(a){var b=this.options.rsz;l(b,"number")||(b=l(b,"string")&&b.match(/^large$/)?8:4);this.execute(this.b,
b*a)};f.prototype.RAWcallback=function(a){var b=this.results=a.results;this.cursor=a.cursor;this.resultViewport=a.viewport;this.d=a.attribution;for(a=0;a<b.length;a++)this.createResultHtml(b[a]);l(this.g,"function")&&this.g()};f.prototype.getAttribution=function(){if(!this.d)return false;return d("gs-results-attribution",[this.d])};f.prototype.createResultHtml=function(a){a.html=d("gs-result gs-localResult",[d("gs-title",[k("a","gs-title",[a.title])]),d("gs-snippet",[a.l]),d("gs-address",[d("gs-street gs-addressLine",
[a.n]),d("gs-city gs-addressLine",[a.city+", "+a.region]),d("gs-country",[a.country])]),d("gs-phone",[a.f&&a.f[0]?a.f[0].k:null]),d("gs-directions")])};f.searchers=[];f.callback=function(a,b){f.searchers[a].RAWcallback(b)};f.h="http://ajax.googleapis.com/ajax/services/search/local?";window.jeremy||(window.jeremy={});window.jeremy.jGoogleBar=i;window.jeremy.jGoogleBar.prototype=i.prototype;window.jeremy.gLocalSearch=f;window.jeremy.gLocalSearch.prototype=f.prototype})();
